<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="./d3/d3.min.js"></script>

  <title>D3.js Intro</title>
  <style>

    h2 {
        text-indent: 50px;
    }

    svg {
      background-color: #DADFFF;
    }

  </style>


</head>
<body>

<h2>An Introduction to D3.js</h2>

<div class="container">
  <div id="chart"></div>
</div>


<script>
  var margin = 50;
  var width = 600 - margin*2;
  var height = 450 - margin*2;


d3.json("data.json", function(error, data) {

  // Save JSON data as a global variable;
  dataset = data;

  // Call plot function that we will define below
  makeScatterplot();

});

function makeScatterplot() {

  // Select chart div and create an SVG element inside of it. This is where we will create our visualization.
  var svg = d3.select("#chart")
    .append('svg')
    .attr('width', width + margin*2)
    .attr('height', height + margin*2);

  // setup x scale
  var xScale = d3.scaleLinear()
    .domain([0, d3.max(dataset, function (d) { return d.unemployment; })])
    .range([0, width])
    .nice();

  // setup y scale
  var yScale = d3.scaleLinear()
    .domain([d3.min(dataset, function (d) { return d.inflation; }), 
            d3.max(dataset, function (d) { return d.inflation; })])
    .range([height, 0])
    .nice();

  var g = svg.append('g')
    .attr('transform', 'translate(' + margin + ',' + margin + ')');

  g.selectAll(".dot")
    .data(dataset)
    .enter()
    .append("circle")
    .attr("class", "dot")
    .attr("r", 8)
    .attr("cx", function (d) { return xScale(d.unemployment); })
    .attr("cy", function (d) { return yScale(d.inflation); });

};


</script>


</body>
</html>